<h2 mat-dialog-title>{{ dialogTitle }}</h2>

<mat-dialog-content>
    <form [formGroup]="bookForm">
        <mat-form-field appearance="outline">
            <mat-label>Tiêu đề</mat-label>
            <input matInput formControlName="title" required>
            <mat-error *ngIf="bookForm.controls['title'].hasError('required') && bookForm.controls['title'].touched">
                Vui lòng nhập tiêu đề.
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Tác giả</mat-label>
            <input matInput formControlName="author" required>
            <mat-hint>Nhập nhiều tác giả cách nhau bằng dấu phẩy (,)</mat-hint>
            <mat-error *ngIf="bookForm.controls['author'].hasError('required') && bookForm.controls['author'].touched">
                Vui lòng nhập tác giả.
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Giá</mat-label>
            <input matInput type="number" formControlName="price" required>
            <mat-error *ngIf="bookForm.controls['price'].hasError('required') && bookForm.controls['price'].touched">
                Vui lòng nhập giá.
            </mat-error>
            <mat-error *ngIf="bookForm.controls['price'].hasError('min') && bookForm.controls['price'].touched">
                Giá phải là số không âm.
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Năm xuất bản</mat-label>
            <input matInput type="number" formControlName="first_publish_year">
            <mat-error
                *ngIf="bookForm.controls['first_publish_year'].hasError('min') && bookForm.controls['first_publish_year'].touched">
                Năm xuất bản phải lớn hơn hoặc bằng 1000.
            </mat-error>
            <mat-error
                *ngIf="bookForm.controls['first_publish_year'].hasError('max') && bookForm.controls['first_publish_year'].touched">
                Năm xuất bản không thể vượt quá năm hiện tại.
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>URL ảnh bìa</mat-label>
            <input matInput formControlName="coverUrl">
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Mô tả</mat-label>
            <textarea matInput formControlName="description" rows="3"></textarea>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Mã Cover</mat-label>
            <input matInput type="number" formControlName="cover">
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Open Library ID</mat-label>
            <input matInput formControlName="openLibraryId">
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Nguồn</mat-label>
            <mat-select formControlName="source">
                <mat-option value="openlibrary">Open Library</mat-option>
                <mat-option value="manual">Thủ công</mat-option>
            </mat-select>
        </mat-form-field>

    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">Hủy</button>
    <button mat-raised-button color="primary" (click)="onSave()" [disabled]="bookForm.invalid">Lưu</button>
</mat-dialog-actions>