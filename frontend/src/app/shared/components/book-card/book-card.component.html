<mat-card class="book-card" *ngIf="book">
  <a [routerLink]="['/book', book._id]" class="book-link-area">
    <div class="book-cover-container">
      <img *ngIf="book.coverUrl" [src]="book.coverUrl" [alt]="book.title" class="book-cover">
      <img *ngIf="!book.coverUrl && book.cover" [src]="'http://covers.openlibrary.org/b/id/' + book.cover + '-L.jpg'"
        [alt]="book.title" class="book-cover">
      <div *ngIf="!book.coverUrl && !book.cover" class="no-cover">
        <span>Kh√¥ng c√≥ b√¨a</span>
        <mat-icon>menu_book</mat-icon>
      </div>
    </div>

    <mat-card-content class="book-content">
      <h3 class="book-title">
        <a [routerLink]="['/book', book._id]" class="book-title-link">
          {{ book.title }}
        </a>
      </h3>
      <p class="book-author">
        <strong>T√°c gi·∫£:</strong>
        {{ isArray(book.author) ? book.author?.join(', ') : book.author || 'ƒêang c·∫≠p nh·∫≠t' }}
      </p>
      <p *ngIf="book.first_publish_year" class="book-year">
        <strong>NƒÉm xu·∫•t b·∫£n:</strong> {{ book.first_publish_year || 'N/A' }}
      </p>
      <p class="book-price">
        <strong>Gi√°:</strong> {{ book.price | currency:'VND':'symbol':'1.0-0' }}
      </p>
      <p *ngIf="book.description" class="book-description">
        {{ book.description.length > 100 ? (book.description | slice:0:100) + '...' : book.description }}
      </p>
    </mat-card-content>
  </a>

  <mat-card-actions *ngIf="showActions && userRole !== 'admin'" class="book-actions">
    <button mat-flat-button color="primary" (click)="handleAddToCart($event)">
      <mat-icon>add_shopping_cart</mat-icon> Th√™m v√†o gi·ªè
    </button>
    <button mat-icon-button (click)="handleToggleFavorite($event)">
      <span *ngIf="isFavorite">‚ù§Ô∏è</span>
      <span *ngIf="!isFavorite">ü§ç</span>
    </button>
  </mat-card-actions>
</mat-card>